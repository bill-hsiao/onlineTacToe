#!/usr/bin/env node

const app = require('../app')
const debug = require('debug')('test:server')
const http = require('http').Server(app)
const port = process.env.PORT

const _io = require('socket.io')(http)
const Connections = require('../game/Connections')
const Game = require('../game/Game')
const io = require('../game/io')



const socket = {
  io
}




app.set('port', port);

 http.listen(port, function(){
   console.log('listening on *:' + port);
   init();
 });

function init() {
  const connections = new Connections
  let game = new Game

  socket.io = io(_io, connections, game)
  socket.io.init()
}
